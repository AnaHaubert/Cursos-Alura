"use strict";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,a,n){return a&&_defineProperties(e.prototype,a),n&&_defineProperties(e,n),e}var ImagesClient=function(){function s(e,a,n,t){_classCallCheck(this,s),this._apiEndpoint=e,this._apiEnvieToken=a,this._apiEnvieId=n,this._apiUserId=t}return _createClass(s,[{key:"upload",value:function(i,r){var o=this;return new Promise(function(a,n){var t={status:!1,paths:[],code:"",message:""},e=new FormData;e.append("image",i),e.append("envie_id",o._apiEnvieId),e.append("gnarus_user_id",o._apiUserId);var s="Bearer "+o._apiEnvieToken;$.ajax({url:o._apiEndpoint,type:"POST",crossDomain:!0,data:e,dataType:"json",contentType:!1,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization",s)},xhr:function(){var e;return(e=$.ajaxSettings.xhr()).upload&&(e.upload.addEventListener("progress",function(e){e.lengthComputable&&(e=e.loaded/e.total*100,r&&r.addProgress(i.name,e))},!1),e.upload.addEventListener("load",function(e){r&&r.finish(i.name)})),e}}).done(function(e){t.status=!0,t.paths=e.data.paths,t.code=e.code,t.message=e.message,a(t)}).fail(function(e){e.responseJSON.code&&(t.code=e.responseJSON.code),e.responseJSON.message&&(t.message=e.responseJSON.message),n(t)})})}}]),s}();